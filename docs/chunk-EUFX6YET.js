import{a as E,b as D,c as T,d as P,e as W}from"./chunk-Z4RP62MK.js";import{a as q}from"./chunk-Y4DAKMJH.js";import{d as A}from"./chunk-JIKGTQUW.js";import"./chunk-FCHFUPX7.js";import"./chunk-YZV6APG6.js";import"./chunk-SASNCHXZ.js";import{$ as d,Ka as r,La as i,Ma as M,Na as S,Oa as V,Qa as p,R as f,Ra as c,Sa as b,T as _,Ta as h,Ua as y,Va as w,Xa as x,aa as u,fa as v,qa as m,wa as g}from"./chunk-Q6J3GLUC.js";var H=(()=>{let n=class n{constructor(){this.id=v(0),this.titulo=g(""),this.anuncio=g({titulo:"",descricao:"",imagem:""}),this.anuncioService=f(q),this.router=f(A)}async ngOnInit(){this.id()?(this.titulo.set("Editar an\xFAncio"),this.anuncio.set(await this.anuncioService.getAnuncio(this.id()))):this.titulo.set("Novo an\xFAncio")}async confirm(o,a,e){if(o.reportValidity()&&a.reportValidity()&&e.reportValidity()){if(e.files[0].size>1024*1024*2){alert("Imagem muito grande! Tamanho m\xE1ximo de 2mb.");return}try{this.anuncio().imagem=await O(e.files[0]),await this.anuncioService.createAnuncio(this.anuncio()),alert("An\xFAncio criado com sucesso!"),this.router.navigateByUrl("/profile/meus-anuncios")}catch(s){alert(`Erro ao criar an\xFAncio ${s}!`)}}}};n.\u0275fac=function(a){return new(a||n)},n.\u0275cmp=_({type:n,selectors:[["app-cadastro-anuncio"]],inputs:{id:[1,"id"]},standalone:!0,features:[x],decls:24,vars:3,consts:[["inputTitulo",""],["textDesc",""],["inputImage",""],[1,"h-100","d-flex","align-items-center","justify-content-center"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[1,"form-floating","mb-3"],["type","text","required","","id","input-titulo","placeholder",".",1,"form-control",3,"ngModelChange","ngModel"],["for","input-titulo"],["required","","rows","4","id","text-desc","placeholder",".",1,"form-control",3,"ngModelChange","ngModel"],["for","text-desc"],[1,"mb-3"],["for","input-imagem"],["type","file","required","","id","input-imagem","accept","image/*",1,"form-control"],[1,"card-footer","text-end"],[1,"btn","btn-primary",3,"click"]],template:function(a,e){if(a&1){let s=S();r(0,"div",3)(1,"div",4)(2,"div",5)(3,"h4",6),c(4),i()(),r(5,"div",7)(6,"div",8)(7,"input",9,0),w("ngModelChange",function(t){return d(s),y(e.anuncio().titulo,t)||(e.anuncio().titulo=t),u(t)}),i(),r(9,"label",10),c(10,"Titulo"),i()(),r(11,"div",8)(12,"textarea",11,1),w("ngModelChange",function(t){return d(s),y(e.anuncio().descricao,t)||(e.anuncio().descricao=t),u(t)}),i(),r(14,"label",12),c(15,"Descricao"),i()(),r(16,"div",13)(17,"label",14),c(18,"Imagem"),i(),M(19,"input",15,2),i()(),r(21,"div",16)(22,"button",17),V("click",function(){d(s);let t=p(8),F=p(13),I=p(20);return u(e.confirm(t,F,I))}),c(23,"Confirmar"),i()()()()}a&2&&(m(4),b(e.titulo()),m(3),h("ngModel",e.anuncio().titulo),m(5),h("ngModel",e.anuncio().descricao))},dependencies:[W,E,D,P,T],styles:[".card[_ngcontent-%COMP%]{width:30rem}.form-floating[_ngcontent-%COMP%] > textarea[_ngcontent-%COMP%]{height:unset}"],changeDetection:0});let l=n;return l})();function O(l){return new Promise((n,B)=>{let o=new FileReader;o.readAsDataURL(l),o.onload=()=>n(o.result),o.onerror=B})}export{H as default};
